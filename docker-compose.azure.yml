version: "3.8"

services:
    ibf-api-service:
        image: rodekruis/ibf-api-service
        ports:
            - 80:3000
        environment:
            - DB_TYPE=${DB_TYPE}
            - DB_HOST=${DB_HOST}
            - DB_PORT=${DB_PORT}
            - DB_DATABASE=${DB_DATABASE}
            - DB_USERNAME=${DB_USERNAME}
            - DB_PASSWORD=${DB_PASSWORD}
        volumes:
            - api-service-root:/home/ibf/api-service
            - web-interface-root:/home/ibf/api-service/dist

    ibf-web-interface:
        command: npm start
        image: rodekruis/ibf-web-interface
        volumes:
            - web-interface-root:/home/node/app/www

volumes:
    api-service-root:
    web-interface-root:
